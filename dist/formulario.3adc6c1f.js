let tipoManutencao=getElement("itipo");campoCorretiva(),tipoManutencao.addEventListener("change",(()=>{"preventiva"==tipoManutencao.value?campoPreventiva():campoCorretiva()})),document.querySelector("#preventivaForm").removeChild(document.querySelector("#preventivaForm > button:nth-child(6)")),manutencaoPreventiva();const pMaterial=document.getElementById("materialConfirm");var materialCounter=0;const pCorfim=document.getElementById("materialConfirm");pCorfim.addEventListener("click",(()=>addMaterial()));const materialHolder=document.getElementById("div__material");getElement("iimages").addEventListener("change",updateImages);const imageText={},btn=getElement("btn");function addMaterial(){let e=document.createElement("input");e.id="imqtd"+materialCounter,e.placeholder="Quantidade",e.type="number",e.title=e.placeholder;let t=document.createElement("input");t.id="imvalorUnit"+materialCounter,t.placeholder="Valor Unitário",t.title=t.placeholder,t.type="number";let n=document.createElement("input");n.id="imdescricao"+materialCounter,n.placeholder="Decrição",n.title=n.placeholder;let a=document.createElement("input");a.id="imunidade"+materialCounter,a.placeholder="Unidade ",a.title=a.placeholder;const l=document.createElement("div");l.id="div"+materialCounter;const i=document.createElement("p");i.id="resetMaterialBtn"+materialCounter,i.innerText="Excluir material",i.classList.add("material__p"),l.classList.add("material__div"),i.addEventListener("click",(()=>{l.remove(),materialCounter--})),materialCounter++,l.append(e,t,n,a,i),materialHolder.append(l)}function fillTable(){resetTable();let e=getElement("form");for(let t=0;t<e.elements.length-1;t++){const n=e.elements[t];let a;switch(n.id){case"iimages":a="imagens";continue;case"preventivaForm":continue;default:a=null==n.value?"":n.value}let l=n.id.slice(1);"dataChegada"==l&&addToTable(a,"data"),addToTable(a,l)}addToTable(subTime(getElement("ihoraChegada").value,getElement("ihoraSaida").value),"tempoTotal"),addMaterials(),addImages();const t=document.createElement("button");t.classList.add("printBtn"),t.addEventListener("click",(()=>print())),t.innerText="Baixar PDF ou Imprimir",getElement("btn-holder").append(t)}function manutencaoPreventiva(){let e=document.getElementById("preventivaForm").children;for(const t of e)"BUTTON"==t.nodeName&&(t.classList.contains("btn__prev--value")?t.addEventListener("click",(()=>{let e,n={value:t.innerHTML,classes:[""]},a=document.createElement("button");a.textContent="Salvar",a.addEventListener("click",(()=>{t.classList.add("used");let n=document.querySelector("body > div.popOut > input").value;e=t.innerHTML.replace("___",n),addToTextarea("imanutencao",e+"\n")})),popOut(n,{type:"number",placeholder:"Digite o valor desejado ",classes:["input__PopOut"],initial:0},"",a)})):t.addEventListener("click",(()=>{addToTextarea("imanutencao",t.textContent+"\n"),t.classList.add("used")})))}function updateImages(){const e=document.querySelector(".preview__img");let t=getElement("iimages").files;if(t.length>0){for(const n of t){const t=document.createElement("div"),a=document.createElement("img");t.classList.add("image__holder"),a.classList.add("img"),e.classList.add("preview__img--visible"),a.src=URL.createObjectURL(n),t.appendChild(a),e.append(t);const l=n.name.slice(0,n.name.lastIndexOf("."));a.alt=l,a.title=l,t.id=l,t.addEventListener("dblclick",(e=>{e.target.remove()}),!0),t.addEventListener("click",(e=>{popOutImg(e.target)})),imageText[l]=[a,""]}return`${t.length} imagens adicionadas`}return"Sem Imagens"}function subTime(e,t){console.log(e,t);let n=Number(e.slice(0,2)),a=Number(t.slice(3,5)),l=Number(e.slice(3,5)),i=Number(t.slice(0,2))+a/60-(n+l/60);return i=i.toFixed(2),i}function addImages(){for(const e in imageText){const t=imageText[e],n=document.createElement("p"),a=document.createElement("div"),l=t[0].cloneNode();l.classList.add("img__table"),n.classList.add("p__table"),a.append(l,n),n.textContent=t[1],n.classList.add("legendImg"),offToggle([],[document.querySelector(".imagens")]),getElement("imagens").appendChild(a)}}function addMaterials(){if(materialHolder.children.length-1>0){offToggle([],[document.querySelector(".materiais")]);let e=materialHolder.children.length-1,t=0;for(let n=1;n<e+1;n++){const e=materialHolder.children[n];let a=e.children[0].value,l=e.children[1].value,i=e.children[2].value,o=e.children[3].value,r=l*a;t+=Number(r),createMaterialField(i,a,o,"R$ "+l,"R$ "+r)}getElement("total").innerHTML="R$ "+t}else offToggle([document.querySelector(".materiais")],[])}function resetTable(){for(;getElement("imagens").firstChild;)getElement("imagens").removeChild(getElement("imagens").firstChild),offToggle([document.querySelector("#imagens")],[]);try{let e=document.querySelector(".materiais").children.length;for(let t=e;0<e-1;t--){const e=document.querySelector(".materiais").children[t-1];e.classList.contains("titulo")||"total"==e.id||e.remove()}}catch(e){}}function createMaterialField(e="descrição",t="0",n="0",a="0",l){let i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div");i.innerHTML=e,o.innerHTML=t,r.innerHTML=n,d.innerHTML=a,c.innerHTML=l,document.querySelector("#materialTotal").before(i,o,r,d,c)}function addToTextarea(e,t){getElement(e).innerHTML+=t,addLines(getElement(e),30)}function popOut(e="",t="",n="",...a){let l,i,o,r=[a];const d=document.createElement("span");d.classList.add("material-symbols-outlined"),d.style.cursor="pointer",d.innerHTML="close",d.addEventListener("click",(()=>{c.remove()}));const c=document.createElement("div");if(c.appendChild(d),""!=e){l=document.createElement("p"),l.innerHTML=e.value;try{l.classList.add(classes)}catch(e){}c.append(l)}if(""!==t){i=document.createElement("input"),i.type=t.type,i.value=t.initial,i.placeholder=t.placeholder;try{i.classList.add(t.classes)}catch(e){}c.append(i)}if(""!=n){o=document.createElement("img"),o.title=n.name,o.alt=n.name;try{o.classList.add(n.classes)}catch(e){}c.append(n)}c.classList.add("popOut");for(let e=0;e<r.length;e++){const t=a[e];c.append(t)}document.body.appendChild(c)}function popOutImg(e){const t=document.createElement("div"),n=document.createElement("p"),a=document.createElement("input"),l=document.createElement("span"),i=document.createElement("button"),o=document.createElement("button"),r=e.cloneNode();i.classList.add("saveBtn"),i.textContent="salvar",l.textContent="close",o.textContent="Deletar Imagem",a.placeholder="Legenda da Imagem",t.classList.add("popOut"),l.classList.add(["material-symbols-outlined"]),o.classList.add("deleteImgBtn"),n.textContent="Escreva uma legenda para a imagem selecionada",l.style.cursor="pointer",l.addEventListener("click",(()=>{t.remove()})),i.addEventListener("click",(()=>{imageText[r.alt]=[r,a.value],a.style.backgroundColor="#1eff3396",i.textContent="Salvo",a.style.color="green"})),o.addEventListener("click",(()=>{e.remove()})),t.append(l,n,r,a,i,o),document.body.appendChild(t)}function addToTable(e,t){try{getElement(t).innerText=e}catch(e){}}function getElement(e,t,n){return void 0===t&&void 0===n?document.getElementById(e):void 0===n?document.getElementsByClassName(t):document.querySelectorAll(n)}function campoPreventiva(){offToggle([getElement(void 0,"corretivaTable")[0],getElement("corretivaForm")],[getElement(void 0,"preventivaTable")[0],getElement("preventivaForm")])}function offToggle(e,t){for(const t of e)t.classList.add("off");for(const e of t)e.classList.remove("off")}function campoCorretiva(){offToggle([getElement(void 0,"preventivaTable")[0],getElement("preventivaForm")],[getElement(void 0,"corretivaTable")[0],getElement("corretivaForm")])}function addLines(e,t){if(e.style.fontSize=t+"px",e.offsetHeight<e.scrollHeight){let t=Number(e.style.fontSize.slice(0,2)),n=Math.floor(e.scrollHeight/t);e.rows=n}}btn.addEventListener("click",fillTable);
//# sourceMappingURL=formulario.3adc6c1f.js.map
